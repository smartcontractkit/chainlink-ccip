// Code generated by https://github.com/Unheilbar/anchor-go. DO NOT EDIT.
// This file contains parsers for the types defined in the IDL.

package access_controller

import (
	"bytes"
	"fmt"
	errors "github.com/Unheilbar/anchor-go/errors"
	binary "github.com/gagliardetto/binary"
	solanago "github.com/gagliardetto/solana-go"
)

type AccessController struct {
	Owner         solanago.PublicKey `json:"owner"`
	ProposedOwner solanago.PublicKey `json:"proposed_owner"`
	AccessList    AccessList         `json:"access_list"`
}

func (obj AccessController) MarshalWithEncoder(encoder *binary.Encoder) (err error) {
	// Serialize `Owner`:
	err = encoder.Encode(obj.Owner)
	if err != nil {
		return errors.NewField("Owner", err)
	}
	// Serialize `ProposedOwner`:
	err = encoder.Encode(obj.ProposedOwner)
	if err != nil {
		return errors.NewField("ProposedOwner", err)
	}
	// Serialize `AccessList`:
	err = encoder.Encode(obj.AccessList)
	if err != nil {
		return errors.NewField("AccessList", err)
	}
	return nil
}

func (obj AccessController) Marshal() ([]byte, error) {
	buf := bytes.NewBuffer(nil)
	encoder := binary.NewBorshEncoder(buf)
	err := obj.MarshalWithEncoder(encoder)
	if err != nil {
		return nil, fmt.Errorf("error while encoding AccessController: %w", err)
	}
	return buf.Bytes(), nil
}

func (obj *AccessController) UnmarshalWithDecoder(decoder *binary.Decoder) (err error) {
	// Deserialize `Owner`:
	err = decoder.Decode(&obj.Owner)
	if err != nil {
		return errors.NewField("Owner", err)
	}
	// Deserialize `ProposedOwner`:
	err = decoder.Decode(&obj.ProposedOwner)
	if err != nil {
		return errors.NewField("ProposedOwner", err)
	}
	// Deserialize `AccessList`:
	err = decoder.Decode(&obj.AccessList)
	if err != nil {
		return errors.NewField("AccessList", err)
	}
	return nil
}

func (obj *AccessController) Unmarshal(buf []byte) error {
	err := obj.UnmarshalWithDecoder(binary.NewBorshDecoder(buf))
	if err != nil {
		return fmt.Errorf("error while unmarshaling AccessController: %w", err)
	}
	return nil
}

func UnmarshalAccessController(buf []byte) (*AccessController, error) {
	obj := new(AccessController)
	err := obj.Unmarshal(buf)
	if err != nil {
		return nil, err
	}
	return obj, nil
}

type AccessList struct {
	Xs  [64]solanago.PublicKey `json:"xs"`
	Len uint64                 `json:"len"`
}

func (obj AccessList) MarshalWithEncoder(encoder *binary.Encoder) (err error) {
	// Serialize `Xs`:
	err = encoder.Encode(obj.Xs)
	if err != nil {
		return errors.NewField("Xs", err)
	}
	// Serialize `Len`:
	err = encoder.Encode(obj.Len)
	if err != nil {
		return errors.NewField("Len", err)
	}
	return nil
}

func (obj AccessList) Marshal() ([]byte, error) {
	buf := bytes.NewBuffer(nil)
	encoder := binary.NewBorshEncoder(buf)
	err := obj.MarshalWithEncoder(encoder)
	if err != nil {
		return nil, fmt.Errorf("error while encoding AccessList: %w", err)
	}
	return buf.Bytes(), nil
}

func (obj *AccessList) UnmarshalWithDecoder(decoder *binary.Decoder) (err error) {
	// Deserialize `Xs`:
	err = decoder.Decode(&obj.Xs)
	if err != nil {
		return errors.NewField("Xs", err)
	}
	// Deserialize `Len`:
	err = decoder.Decode(&obj.Len)
	if err != nil {
		return errors.NewField("Len", err)
	}
	return nil
}

func (obj *AccessList) Unmarshal(buf []byte) error {
	err := obj.UnmarshalWithDecoder(binary.NewBorshDecoder(buf))
	if err != nil {
		return fmt.Errorf("error while unmarshaling AccessList: %w", err)
	}
	return nil
}

func UnmarshalAccessList(buf []byte) (*AccessList, error) {
	obj := new(AccessList)
	err := obj.Unmarshal(buf)
	if err != nil {
		return nil, err
	}
	return obj, nil
}
