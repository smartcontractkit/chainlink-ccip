# we want to define 3 fast chain and 4 slow chains, define a chain profile
---
in: |
  deployments:
    geth:
      helm:
        values:
          chains:
            - networkId: 1337
            - networkId: 2337
            - networkId: "90000001"
              blockTime: 4
            - networkId: "90000002"
              blockTime: 4
          ingress:
            enabled: true
            hosts:
              - host: ${DEVSPACE_NAMESPACE}-geth-1337-http.${DEVSPACE_INGRESS_BASE_DOMAIN}
                http:
                  paths:
                    - path: /
                      backend:
                        service:
                          name: geth-1337
                          port:
                            number: 8544
              - host: ${DEVSPACE_NAMESPACE}-geth-1337-ws.${DEVSPACE_INGRESS_BASE_DOMAIN}
                http:
                  paths:
                    - path: /
                      backend:
                        service:
                          name: geth-1337
                          port:
                            number: 8546
              - host: ${DEVSPACE_NAMESPACE}-geth-2337-http.${DEVSPACE_INGRESS_BASE_DOMAIN}
                http:
                  paths:
                    - path: /
                      backend:
                        service:
                          name: geth-2337
                          port:
                            number: 8544
              - host: ${DEVSPACE_NAMESPACE}-geth-2337-ws.${DEVSPACE_INGRESS_BASE_DOMAIN}
                http:
                  paths:
                    - path: /
                      backend:
                        service:
                          name: geth-2337
                          port:
                            number: 8546
              {{- if gt (conv.ToInt .Env.ADDITIONAL_CHAINS_COUNT) 0 }}
              {{- range $i := seq 1 .Env.ADDITIONAL_CHAINS_COUNT }}
              {{- $networkId := add 90000000 $i}}
              - host: ${DEVSPACE_NAMESPACE}-geth-{{ $networkId }}-http.${DEVSPACE_INGRESS_BASE_DOMAIN}
                http:
                  paths:
                    - path: /
                      backend:
                        service:
                          name: geth-{{ $networkId }}
                          port:
                            number: 8544
              - host: ${DEVSPACE_NAMESPACE}-geth-{{ $networkId }}-ws.${DEVSPACE_INGRESS_BASE_DOMAIN}
                http:
                  paths:
                    - path: /
                      backend:
                        service:
                          name: geth-{{ $networkId }}
                          port:
                            number: 8546
              {{- end }}
              {{- end }}
