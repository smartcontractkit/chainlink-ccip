---
in: |
  dependencies:
    job-distributor:
      profiles:
        - size-medium
  deployments:
    chainlink-don:
      helm:
        values:
          ingress:
            enabled: false
          common:
            ingress:
              annotations:
                alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-west-2:273354650086:certificate/cff3fbc7-e14c-4d79-af82-dc66d747ebf0
                alb.ingress.kubernetes.io/group.name: sandbox
                alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":443}, {"HTTP":80}]'
                alb.ingress.kubernetes.io/ssl-redirect: "443"
                alb.ingress.kubernetes.io/target-type: ip
              enabled: true
              ingressClassName: alb
              hosts:
                - host: "${DEVSPACE_NAMESPACE}-%s.${DEVSPACE_INGRESS_BASE_DOMAIN}"
                  paths:
                    - path: /*
                      pathType: ImplementationSpecific
                  useNodeName: true
    {{- if eq (getenv "DON_TYPE") "gateway" }}
    gateway-ingress:
      helm:
        values:
          ingressClassName: alb
          ingress:
            enabled: true
          fullnameOverride: gateway-ingress
          certArn: arn:aws:acm:us-west-2:273354650086:certificate/cff3fbc7-e14c-4d79-af82-dc66d747ebf0
          annotations:
            alb.ingress.kubernetes.io/group.name: sandbox
            alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":443}, {"HTTP":80}]'
            alb.ingress.kubernetes.io/ssl-redirect: "443"
            alb.ingress.kubernetes.io/success-codes: "200"
            alb.ingress.kubernetes.io/healthcheck-path: "/health"
            alb.ingress.kubernetes.io/target-type: "ip"
          groupName: gateway
          ingressPathType: ImplementationSpecific
          host: "${DEVSPACE_NAMESPACE}-gateway.${DEVSPACE_INGRESS_BASE_DOMAIN}"

          nodeMapping:
            - "0"
    {{- end }}
