---
in: |
  dependencies:
    job-distributor:
      profiles:
        - size-medium
  deployments:
    chainlink-don:
      helm:
        values:
          common:
            resources:
              requests:
                cpu: "2"
                memory: 4Gi
              limits:
                cpu: "2"
                memory: 4Gi

    {{- if gt (conv.ToInt .Env.DON_BOOT_NODE_COUNT) 0 }}
    {{- range $i := seq 0 (math.Sub .Env.DON_BOOT_NODE_COUNT 1) }}
    chainlink-don-db-bt-{{ $i }}:
      helm:
        valuesFiles:
          - ${LOCAL_VALUES_DIR}/postgresql/type.dev.yaml
          - ${LOCAL_VALUES_DIR}/postgresql/env.crib-staging-ccip-load-tests.yaml
    {{- end }}
    {{- end }}
    {{- if gt (conv.ToInt .Env.DON_NODE_COUNT) 0 }}
    {{- range $i := seq 0 (math.Sub .Env.DON_NODE_COUNT 1) }}
    chainlink-don-db-{{ $i }}:
      helm:
        valuesFiles:
          - ${LOCAL_VALUES_DIR}/postgresql/type.dev.yaml
          - ${LOCAL_VALUES_DIR}/postgresql/env.crib-staging-ccip-load-tests.yaml
    {{- end }}
    {{- end }}
